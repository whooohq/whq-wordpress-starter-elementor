!function(t,e){var o,a=t.jQuery||t.Cowboy||(t.Cowboy={});a.throttle=o=function(t,o,i,r){var s,n=0;function d(){var a=this,d=+new Date-n,c=arguments;function l(){n=+new Date,i.apply(a,c)}function m(){s=e}r&&!s&&l(),s&&clearTimeout(s),r===e&&d>t?l():!0!==o&&(s=setTimeout(r?m:l,r===e?t-d:t))}return"boolean"!=typeof o&&(r=i,i=o,o=e),a.guid&&(d.guid=i.guid=i.guid||a.guid++),d},a.debounce=function(t,a,i){return i===e?o(t,a,!1):o(t,i,!1!==a)}}(window),jQuery(document).ready((function(t){function e(e){if(null==e)var o=t(document).find("[data-piotnetforms-woocommerce-checkout-form-id]");else o=t(document).find('[data-piotnetforms-woocommerce-checkout-form-id="'+e+'"]');o.length>0&&o.each((function(){var e=t(this).attr("data-piotnetforms-woocommerce-checkout-form-id"),o=t(document).find('[data-piotnetforms-id="'+e+'"]'),a=[],i=new FormData,r=t(this);o.each((function(){if(null==t(this).data("piotnetforms-stripe")&&null==t(this).data("piotnetforms-html")){t(this).closest(".piotnetforms-field-group").find("[data-piotnetforms-required]").html("");var o=t(this).attr("type"),i=t(this).attr("name"),r=t(this).closest("[data-piotnetforms-repeater-form-id]"),s="",n="",d="",c=-1,l=0;if(r.length>0){var m=t(this).parents("[data-piotnetforms-repeater-form-id]");n=r.data("piotnetforms-repeater-id"),m.each((function(){var o=t(this).data("piotnetforms-repeater-id"),a=t(document).find('[data-piotnetforms-repeater-form-id="'+e+'"][data-piotnetforms-repeater-id="'+o+'"]'),r=t(this).index()-a.index();s+=o+"|index"+r+"|"+i.replace("[]","").replace("form_fields[","").replace("]","")+","})),d=r.data("piotnetforms-repeater-label");var f=t(document).find('[data-piotnetforms-repeater-id="'+r.data("piotnetforms-repeater-id")+'"]');l=r.siblings('[data-piotnetforms-repeater-id="'+r.data("piotnetforms-repeater-id")+'"]').length+1,c=r.index()-f.index()}if(-1!==i.indexOf("[]")){var p=[];"checkbox"==o?t(this).closest(".piotnetforms-fields-wrapper").find('[name="'+i+'"]:checked').each((function(){p.push(t(this).val())})):null==(p=t(this).val())&&(p=[]),w="";for(var u="",h=[],g=0;g<p.length;g++){if(null!=t(this).data("piotnetforms-send-data-by-label")){var _=p[g];"checkbox"==o?(v=t(this).closest(".piotnetforms-fields-wrapper").find('[value="'+_+'"]')).length>0&&(u+=v.data("piotnetforms-send-data-by-label")+","):(v=t(this).find('[value="'+_+'"]')).length>0&&(u+=v.html()+",")}w+=p[g]+",",null!=t(this).attr("data-piotnetforms-form-booking-item-options")&&(_=p[g],(v=t(this).closest(".piotnetforms-fields-wrapper").find('[value="'+_+'"]')).length>0&&h.push(v.attr("data-piotnetforms-form-booking-item-options")))}w=w.replace(/,(\s+)?$/,"")}else if("radio"==o||"checkbox"==o){null!=t(this).data("piotnetforms-send-data-by-label")&&(u=t(this).closest(".piotnetforms-fields-wrapper").find('[name="'+i+'"]:checked').data("piotnetforms-send-data-by-label"));var w=t(this).closest(".piotnetforms-fields-wrapper").find('[name="'+i+'"]:checked').val()}else if(null!=t(this).data("piotnetforms-calculated-fields"))w=t(this).siblings(".piotnetforms-calculated-fields-form").text();else{var v;if(null!=t(this).data("piotnetforms-send-data-by-label"))_=t(this).val().trim(),(v=t(this).find('[value="'+_+'"]')).length>0&&(u=v.html());w=t(this).val().trim()}if(null!=w){var b={};b.label=t(this).closest(".piotnetforms-field-group").find(".piotnetforms-field-label").html(),b.name=i.replace("[]","").replace("form_fields[","").replace("]",""),b.value=w,void 0!==h&&h.length>0&&(b.booking=h),""!=u&&(b.value_label=u),t(this).closest(".piotnetforms-field-type-calculated_fields").length>0&&(b.calculation_results=t(this).val().trim()),t(this).closest(".piotnetforms-widget").hasClass("piotnetforms-conditional-logic-hidden")||(b.repeater_id=s,b.repeater_id_one=n,b.repeater_label=d,b.repeater_index=c,b.repeater_length=l,a.push(b))}}})),i.append("action","piotnetforms_ajax_form_builder_woocommerce_checkout"),i.append("fields",JSON.stringify(a)),i.append("form_id",t(this).attr("data-piotnetforms-woocommerce-checkout-id")),i.append("post_id",t(this).attr("data-piotnetforms-woocommerce-checkout-post-id")),i.append("product_id",t(this).attr("data-piotnetforms-woocommerce-checkout-product-id")),t.ajax({url:t("[data-piotnetforms-ajax-url]").data("piotnetforms-ajax-url"),type:"POST",data:i,processData:!1,contentType:!1,success:function(e){"1"==e.trim()&&(t("body").trigger("update_checkout"),t("body").trigger("wc_update_cart"),r.find("#place_order").attr("data-piotnetforms-woocommerce-checkout-place-order",""))}})}))}t(document).on("keyup change","[data-piotnetforms-id]",t.debounce(700,(function(){e(t(this).attr("data-piotnetforms-id"))}))),t(document).on("click","#place_order",(function(e){var o=t(this).closest("[data-piotnetforms-woocommerce-checkout-form-id]").attr("data-piotnetforms-woocommerce-checkout-form-id");if(null!=o){var a=t(document).find('[data-piotnetforms-id="'+o+'"]');0!=window.piotnetformsValidateFields(a)&&e.preventDefault()}})),t(window).on("load",(function(){e()})),t(document).on("click","[data-piotnetforms-woocommerce-sales-funnels-add-to-cart]",(function(e){e.preventDefault();var o=t(this);o.css("opacity","0.5"),o.find("[data-piotnetforms-woocommerce-sales-funnels-add-to-cart-message]").remove();var a=t(this).attr("data-piotnetforms-woocommerce-sales-funnels-add-to-cart"),i=JSON.parse(a);t.ajax({url:t("[data-piotnetforms-ajax-url]").data("piotnetforms-ajax-url"),type:"POST",data:{action:"piotnetforms_ajax_woocommerce_sales_funnels_add_to_cart",options:i},success:function(e){o.css("opacity","1"),1==JSON.parse(e).status?(o.append('<div data-piotnetforms-woocommerce-sales-funnels-add-to-cart-message class="piotnetforms-woocommerce-sales-funnels-add-to-cart-message piotnetforms-woocommerce-sales-funnels-add-to-cart-message--success">'+i.message_success+"</div>"),t("body").trigger("update_checkout"),t("body").trigger("wc_update_cart")):(o.append('<div data-piotnetforms-woocommerce-sales-funnels-add-to-cart-message class="piotnetforms-woocommerce-sales-funnels-add-to-cart-message piotnetforms-woocommerce-sales-funnels-add-to-cart-message--out-of-stock">'+i.message_out_of_stock+"</div>"),t("body").trigger("update_checkout"),t("body").trigger("wc_update_cart"))}})}))}));