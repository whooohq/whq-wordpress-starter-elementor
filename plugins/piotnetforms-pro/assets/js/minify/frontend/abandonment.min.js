!function(t){var e={};function o(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e){jQuery(document).ready((function(t){function e(){this.length=8,this.timestamp=+new Date;this.generate=function(){for(var t,e,o=this.timestamp.toString().split("").reverse(),a="",n=0;n<this.length;++n){a+=o[(t=0,e=o.length-1,Math.floor(Math.random()*(e-t+1))+t)]}return a}}t(document).on("keyup change","[data-piotnetforms-id]",(function(){var o=t(this).attr("data-piotnetforms-id");if(t('[data-piotnetforms-abandonment] [data-piotnetforms-submit-form-id="'+o+'"]').length>0){var a,n=t(this).val(),r=t(this).attr("name").replace("form_fields[","").replace("]","").replace("[]",""),i="piotnetforms-abandonment-"+o;if("checkbox"==t(this).attr("type"))if(t(this).attr("name").includes("[]"))n=[],t(this).closest("form").find('[name="form_fields['+r+'][]"]').each((function(){t(this).is(":checked")&&n.push(t(this).val())}));else t(this).is(":checked")||(n="");if(localStorage[i])(a=JSON.parse(localStorage.getItem(i)))[r]=n;else(a={userId:(new e).generate(),form_id:o})[r]=n;localStorage.setItem(i,JSON.stringify(a))}})),t("[data-piotnetforms-abandonment] [data-piotnetforms-submit-form-id]").each((function(){var e="piotnetforms-abandonment-"+t(this).attr("data-piotnetforms-submit-form-id"),o=t('[data-piotnetforms-id][name^="form_fields"]');if(localStorage[e]){var a=JSON.parse(localStorage.getItem(e));o.each((function(){var e=t(this).attr("type"),o=t(this).attr("name").replace("form_fields[","").replace("]","").replace("[]","");"radio"==e?void 0!==a[o]&&t(this).attr("value")==a[o]&&t(this).prop("checked",!0):"checkbox"==e?void 0!==a[o]&&(t(this).attr("name").includes("[]")?a[o].includes(t(this).attr("value"))&&t(this).prop("checked",!0):t(this).attr("value")==a[o]&&t(this).prop("checked",!0)):void 0!==a[o]&&t(this).val(a[o])}))}})),t(document).on("click","[data-piotnetforms-trigger-success]",(function(){var e="piotnetforms-abandonment-"+t(this).attr("data-piotnetforms-trigger-success"),o=t("[data-piotnetforms-abandonment-webhook]"),a=o.length>0&&o.attr("data-piotnetforms-abandonment-webhook");if(localStorage[e]){var n=JSON.parse(localStorage.getItem(e)),r=new FormData;r.append("action","piotnetforms_form_abandonment"),r.append("fields",JSON.stringify(n)),r.append("form_type","piotnetforms Form"),r.append("function","success"),r.append("webhook",a),navigator.sendBeacon(t("[data-piotnetforms-ajax-url]").data("piotnetforms-ajax-url"),r),localStorage.removeItem(e)}})),t(window).on("blur beforeunload",(function(e){var o;o=e.type,t("[data-piotnetforms-abandonment] [data-piotnetforms-submit-form-id]").each((function(){var e="piotnetforms-abandonment-"+t(this).attr("data-piotnetforms-submit-form-id"),a=t("[data-piotnetforms-abandonment-webhook]"),n=a.length>0&&a.attr("data-piotnetforms-abandonment-webhook");if("blur"==o&&(n=!1),localStorage[e]){var r=JSON.parse(localStorage.getItem(e)),i=new FormData;i.append("action","piotnetforms_form_abandonment"),i.append("fields",JSON.stringify(r)),i.append("form_type","piotnetforms"),i.append("function","abandonment"),i.append("webhook",n),navigator.sendBeacon(t("[data-piotnetforms-ajax-url]").data("piotnetforms-ajax-url"),i)}}))}))}))}]);