!function(e){var t={};function a(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t){jQuery(document).ready((function(e){function t(){this.length=8,this.timestamp=+new Date;this.generate=function(){for(var e,t,a=this.timestamp.toString().split("").reverse(),o="",n=0;n<this.length;++n){o+=a[(e=0,t=a.length-1,Math.floor(Math.random()*(t-e+1))+e)]}return o}}e(document).on("keyup change","[data-piotnetforms-image-upload]",(function(){var a=e(this).closest("label"),o=e(this).closest(".piotnetforms-fields-wrapper"),n=1e3;if(void 0!==a.attr("data-piotnetforms-image-upload-max-files")){n=parseInt(a.attr("data-piotnetforms-image-upload-max-files"));var i=o.find(".piotnetforms-image-upload-placeholder.piotnetforms-image-upload-uploaded:not(.piotnetforms-image-upload-delete)").length;n-=i}e.each(e(this)[0].files,(function(i,r){if(n>0){n-=1;var l=r.name,p=l.substring(l.lastIndexOf(".")+1).toLowerCase();if("gif"==p||"png"==p||"jpg"==p||"jpeg"==p)if("undefined"!=typeof FileReader){"multiple"!=a.attr("multiple")&&a.hide(0);var d=(new t).generate(),s=new FileReader;s.onload=function(e){(new Image).src=e.target.result,a.before('<div class="piotnetforms-image-upload-placeholder piotnetforms-image-upload-uploading" style="background-image:url('+e.target.result+')" data-piotnetforms-image-upload-placeholder="'+d+'"><input type="text" style="display:none;" data-piotnetforms-image-upload-item><span class="piotnetforms-image-upload-button piotnetforms-image-upload-button--remove" data-piotnetforms-image-upload-button-remove><i class="fa fa-times" aria-hidden="true"></i></span><span class="piotnetforms-image-upload-button piotnetforms-image-upload-button--uploading" data-piotnetforms-image-upload-button-uploading><i class="fa fa-spinner fa-spin"></i></span></div>')},s.readAsDataURL(r);var u=new FormData;u.append("upload",r),e.ajax({url:e("[data-piotnetforms-tinymce-upload]").data("piotnetforms-tinymce-upload"),type:"POST",data:u,processData:!1,contentType:!1,success:function(t){var a=JSON.parse(t),n=e(document).find('[data-piotnetforms-image-upload-placeholder="'+d+'"]');if(1==n.length){n.removeClass("piotnetforms-image-upload-uploading").addClass("piotnetforms-image-upload-uploaded"),n.find("input").attr("value",a.location);var i="";o.find("[data-piotnetforms-image-upload-placeholder]:not(.piotnetforms-image-upload-delete) [data-piotnetforms-image-upload-item]").each((function(){i+=e(this).val()+","})),i=i.replace(/.$/,""),o.find("[data-piotnetforms-id]").attr("value",i),o.find("[data-piotnetforms-id]").val(i),o.find("[data-piotnetforms-id]").change()}}})}else alert("Your browser does not support");0==n&&a.hide(0)}else a.hide(0)}))})),e(document).on("click","[data-piotnetforms-image-upload-button-remove]",(function(){var t=e(this).closest(".piotnetforms-image-upload-placeholder");t.css({display:"none"}),t.addClass("piotnetforms-image-upload-delete");var a=e(this).closest(".piotnetforms-fields-wrapper"),o=a.find("[data-piotnetforms-image-upload-placeholder]:not(.piotnetforms-image-upload-delete) [data-piotnetforms-image-upload-item]"),n="",i=a.find("[data-piotnetforms-image-upload-label]");0==o.length&&i.show(0),"multiple"==i.attr("multiple")&&i.show(0),o.each((function(){n+=e(this).val()+","})),n=n.replace(/.$/,""),a.find("[data-piotnetforms-id]").attr("value",n)}))}))}]);