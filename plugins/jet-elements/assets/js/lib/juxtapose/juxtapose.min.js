!function(s,n){var a={sliders:[],OPTIMIZATION_ACCEPTED:1,OPTIMIZATION_WAS_CONSTRAINED:2},o=["Large","Medium"];function l(t,e){var i=this;this.image=new Image,this.loaded=!1,this.image.onload=function(){i.loaded=!0,e._onLoaded()},this.image.src=t.src,this.image.alt=t.alt||"",this.label=t.label||!1,this.credit=t.credit||!1}function d(t,e){var i=this;this.image=new Image,this.loaded=!1,this.image.onload=function(){i.loaded=!0,e._onLoaded()},this.flickrID=this.getFlickrID(t.src),this.callFlickrAPI(this.flickrID,i),this.label=t.label||!1,this.credit=t.credit||!1}function e(t){if(t.naturalWidth&&t.naturalHeight)return{width:t.naturalWidth,height:t.naturalHeight};var e=new Image;return e.src=t.src,{width:e.width,height:e.height}}function r(t){return{width:e(t).width,height:e(t).height,aspect:function(){return this.width/this.height}}}function c(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function p(t,i){t.className=t.className.replace(/(\S+)\s*/g,function(t,e){return e===i?"":t}).replace(/^\s+/,"")}function i(t,e){s.body.textContent?t.textContent=e:t.innerText=e}function g(t){return n.getComputedStyle?{width:parseInt(getComputedStyle(t).width,10),height:parseInt(getComputedStyle(t).height,10)}:(w=t.getBoundingClientRect().right-t.getBoundingClientRect().left,h=t.getBoundingClientRect().bottom-t.getBoundingClientRect().top,{width:parseInt(w,10)||0,height:parseInt(h,10)||0})}function u(t){return-1!=t.indexOf("flickr.com/photos/")}function m(t,e){var i;return leftPercent="string"==typeof e||"number"==typeof e?parseInt(e,10):((i=t.getBoundingClientRect()).top,s.body.scrollTop,i=i.left+s.body.scrollLeft,t=t.offsetWidth,((e=(e=e).pageX||(e.touches?e.touches[0].pageX:e.clientX+s.body.scrollLeft+s.documentElement.scrollLeft))-i)/t*100),leftPercent}function f(t,e){var i,r;return topPercent="string"==typeof e||"number"==typeof e?parseInt(e,10):(r=(i=t.getBoundingClientRect()).top+s.body.scrollTop,i.left,s.body.scrollLeft,t=t.offsetHeight,((e=(e=e).pageY||(e.touches?e.touches[0].pageY:e.clientY+s.body.scrollTop+s.documentElement.scrollTop))-r)/t*100),topPercent}d.prototype={getFlickrID:function(t){var e=t.indexOf("flickr.com/photos/")+"flickr.com/photos/".length,e=t.substr(e);return-1==e.indexOf("/")?null:(0===e.indexOf("/")&&(e=e.substr(1)),id=e.split("/")[1],id)},callFlickrAPI:function(t,e){var t="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key=d90fc2d1f4acc584e08b8eaea5bf4d6c&photo_id="+t+"&format=json&nojsoncallback=1",i=new XMLHttpRequest;i.open("GET",t,!0),i.onload=function(){var t;200<=i.status&&i.status<400?(data=JSON.parse(i.responseText),t=e.bestFlickrUrl(data.sizes.size),e.setFlickrImage(t)):console.error("There was an error getting the picture from Flickr")},i.onerror=function(){console.error("There was an error getting the picture from Flickr")},i.send()},setFlickrImage:function(t){this.image.src=t},bestFlickrUrl:function(t){for(var e={},i=0;i<t.length;i++)e[t[i].label]=t[i].source;for(var r=0;r<o.length;r++)if(o[r]in e)return e[o[r]];return t[0].source}};var b={animate:!0,showLabels:!0,showCredits:!0,makeResponsive:!0};function t(t,e,i){var r,s;for(r in this.selector=t,this.options={animate:!0,showLabels:!0,showCredits:!0,makeResponsive:!0,startingPosition:"50%",mode:"horizontal",prevIcon:"",nextIcon:"",callback:null},this.options)r in i&&(this.options[r]=r in b?"string"!=typeof(s=i[r])?Boolean(s):!("false"===s||""===s):i[r]);2==e.length?(u(e[0].src)?this.imgBefore=new d(e[0],this):this.imgBefore=new l(e[0],this),u(e[1].src)?this.imgAfter=new d(e[1],this):this.imgAfter=new l(e[1],this)):console.warn("The images parameter takes two Image objects."),this.imgBefore.credit||this.imgAfter.credit?this.options.showCredits=!0:this.options.showCredits=!1}t.prototype={updateSlider:function(t,e){var i=("vertical"===this.options.mode?f:m)(this.slider,t);i=i.toFixed(2)+"%",leftPercentNum=parseFloat(i),t=100-leftPercentNum+"%",0<leftPercentNum&&leftPercentNum<100&&(p(this.handle,"transition"),p(this.rightImage,"transition"),p(this.leftImage,"transition"),this.options.animate&&e&&(c(this.handle,"transition"),c(this.leftImage,"transition"),c(this.rightImage,"transition")),"vertical"===this.options.mode?(this.handle.style.top=i,this.leftImage.style.height=i,this.rightImage.style.height=t):(this.handle.style.left=i,this.leftImage.style.width=i,this.rightImage.style.width=t),this.sliderPosition=i)},getPosition:function(){return this.sliderPosition},displayLabel:function(t,e){label=s.createElement("div"),label.className="jx-label",label.setAttribute("tabindex",0),i(label,e),t.appendChild(label)},displayCredits:function(){credit=s.createElement("div"),credit.className="jx-credit",text="<em>Photo Credits:</em>",this.imgBefore.credit&&(text+=" <em>Before</em> "+this.imgBefore.credit),this.imgAfter.credit&&(text+=" <em>After</em> "+this.imgAfter.credit),credit.innerHTML=text,this.wrapper.appendChild(credit)},setStartingPosition:function(t){this.options.startingPosition=t},checkImages:function(){return r(this.imgBefore.image).aspect()==r(this.imgAfter.image).aspect()},calculateDims:function(t,e){var i=r(this.imgBefore.image).aspect();return t?e=t/i:e&&(t=e*i),{width:t,height:e,ratio:i}},responsivizeIframe:function(t){return t.height<n.innerHeight?1<=t.ratio&&(this.wrapper.style.paddingTop=parseInt((n.innerHeight-t.height)/2)+"px"):t.height>n.innerHeight&&(t=this.calculateDims(0,n.innerHeight),this.wrapper.style.paddingLeft=parseInt((n.innerWidth-t.width)/2)+"px"),this.options.showCredits&&(t.height-=13),t},setWrapperDimensions:function(){var t=g(this.wrapper).width,e=g(this.wrapper).height,e=this.calculateDims(t,e);n.location===n.parent.location||this.options.makeResponsive||(e=this.responsivizeIframe(e)),this.slider.style.height=parseInt(e.height)+"px",this.slider.style.width=parseInt(e.width)+"px"},optimizeWrapper:function(t){var e=a.OPTIMIZATION_ACCEPTED;return this.imgBefore.image.naturalWidth>=t&&this.imgAfter.image.naturalWidth>=t?(this.wrapper.style.width=t+"px",e=a.OPTIMIZATION_WAS_CONSTRAINED):this.imgAfter.image.naturalWidth<t?this.wrapper.style.width=this.imgAfter.image.naturalWidth+"px":this.wrapper.style.width=this.imgBefore.image.naturalWidth+"px",this.setWrapperDimensions(),e},_onLoaded:function(){this.imgBefore&&!0===this.imgBefore.loaded&&this.imgAfter&&!0===this.imgAfter.loaded&&(this.wrapper=s.querySelector(this.selector),c(this.wrapper,"juxtapose"),this.slider=s.createElement("div"),this.slider.className="jx-slider",this.wrapper.appendChild(this.slider),this.wrapper.style.width=e(this.imgBefore.image).width,this.setWrapperDimensions(),"horizontal"!=this.options.mode&&c(this.slider,this.options.mode),this.handle=s.createElement("div"),this.handle.className="jx-handle",this.rightImage=s.createElement("div"),this.rightImage.className="jx-image jx-right",this.rightImage.appendChild(this.imgAfter.image),this.leftImage=s.createElement("div"),this.leftImage.className="jx-image jx-left",this.leftImage.appendChild(this.imgBefore.image),this.labCredit=s.createElement("a"),this.labCredit.setAttribute("href","http://juxtapose.knightlab.com"),this.labCredit.setAttribute("target","_blank"),this.labCredit.className="jx-knightlab",this.labLogo=s.createElement("div"),this.labLogo.className="knightlab-logo",this.labCredit.appendChild(this.labLogo),this.projectName=s.createElement("span"),this.projectName.className="juxtapose-name",i(this.projectName,"JuxtaposeJS"),this.labCredit.appendChild(this.projectName),this.slider.appendChild(this.handle),this.slider.appendChild(this.leftImage),this.slider.appendChild(this.rightImage),this.leftArrow=s.createElement("div"),this.rightArrow=s.createElement("div"),this.control=s.createElement("div"),this.controller=s.createElement("div"),this.controllerPrev=s.createElement("i"),this.controllerNext=s.createElement("i"),this.leftArrow.className="jx-arrow jx-left",this.rightArrow.className="jx-arrow jx-right",this.control.className="jx-control",this.controller.className="jx-controller",this.controllerPrev.innerHTML=this.options.prevIcon,this.controllerNext.innerHTML=this.options.nextIcon,this.controller.setAttribute("tabindex",0),this.controller.setAttribute("role","slider"),this.controller.setAttribute("aria-valuenow",50),this.controller.setAttribute("aria-valuemin",0),this.controller.setAttribute("aria-valuemax",100),this.handle.appendChild(this.leftArrow),this.handle.appendChild(this.control),this.handle.appendChild(this.rightArrow),this.control.appendChild(this.controller),this.controller.appendChild(this.controllerPrev),this.controller.appendChild(this.controllerNext),this._init())},_init:function(){!1===this.checkImages()&&console.warn(this,"Check that the two images have the same aspect ratio for the slider to work correctly."),this.updateSlider(this.options.startingPosition,!1),!0===this.options.showLabels&&(this.imgBefore.label&&this.displayLabel(this.leftImage,this.imgBefore.label),this.imgAfter.label&&this.displayLabel(this.rightImage,this.imgAfter.label)),!0===this.options.showCredits&&this.displayCredits();var r=this;this.slider.addEventListener("mousedown",function(t){(t=t||n.event).preventDefault(),r.updateSlider(t,!0),animate=!0,this.addEventListener("mousemove",function(t){(t=t||n.event).preventDefault(),animate&&r.updateSlider(t,!1)}),this.addEventListener("mouseup",function(t){(t=t||n.event).preventDefault(),t.stopPropagation(),this.removeEventListener("mouseup",arguments.callee),animate=!1})}),this.slider.addEventListener("touchstart",function(t){(t=t||n.event).preventDefault(),t.stopPropagation(),r.updateSlider(t,!0),this.addEventListener("touchmove",function(t){(t=t||n.event).preventDefault(),t.stopPropagation(),r.updateSlider(event,!1)})}),n.addEventListener("orientationchange",function(){r.setWrapperDimensions()}),n.addEventListener("resize",function(){r.setWrapperDimensions()}),this.handle.addEventListener("keydown",function(t){var e=(t=t||n.event).which||t.keyCode,i=parseFloat(this.style.left);37==e&&(--i,t=parseFloat(this.style.left)-1,r.updateSlider(t,!1),r.controller.setAttribute("aria-valuenow",i)),39==e&&(i+=1,e=parseFloat(this.style.left)+1,r.updateSlider(e,!1),r.controller.setAttribute("aria-valuenow",i))}),this.leftImage.addEventListener("keydown",function(t){t=t.which||t.keyCode;13!=t&&32!=t||(r.updateSlider("90%",!0),r.controller.setAttribute("aria-valuenow",90))}),this.rightImage.addEventListener("keydown",function(t){t=t.which||t.keyCode;13!=t&&32!=t||(r.updateSlider("10%",!0),r.controller.setAttribute("aria-valuenow",10))}),a.sliders.push(this),this.options.callback&&"function"==typeof this.options.callback&&this.options.callback(this)}},a.makeSlider=function(t,e){void 0===e&&(e=a.sliders.length);var i=t,r=i.querySelectorAll("img"),s={};i.getAttribute("data-animate")&&(s.animate=i.getAttribute("data-animate")),i.getAttribute("data-showlabels")&&(s.showLabels=i.getAttribute("data-showlabels")),i.getAttribute("data-showcredits")&&(s.showCredits=i.getAttribute("data-showcredits")),i.getAttribute("data-startingposition")&&(s.startingPosition=i.getAttribute("data-startingposition")),i.getAttribute("data-mode")&&(s.mode=i.getAttribute("data-mode")),i.getAttribute("data-makeresponsive")&&(s.mode=i.getAttribute("data-makeresponsive")),i.getAttribute("data-prev-icon")&&(s.prevIcon=i.getAttribute("data-prev-icon")),i.getAttribute("data-next-icon")&&(s.nextIcon=i.getAttribute("data-next-icon")),specificClass="juxtapose-"+e,c(t,specificClass),selector="."+specificClass,i.innerHTML?i.innerHTML="":i.innerText="",slider=new a.JXSlider(selector,[{src:r[0].src,label:r[0].getAttribute("data-label"),credit:r[0].getAttribute("data-credit"),alt:r[0].alt},{src:r[1].src,label:r[1].getAttribute("data-label"),credit:r[1].getAttribute("data-credit"),alt:r[1].alt}],s)},a.scanPage=function(t){for(var e=s.querySelectorAll(t),i=0;i<e.length;i++)"true"!==e[i].getAttribute("data-init")&&(e[i].setAttribute("data-init","true"),a.makeSlider(e[i],i))},a.JXSlider=t,n.juxtapose=a}(document,window),function(r,i){function t(t){var e=i[t];i[t]=function(t){return n(e(t))}}function s(t,e,i){return(i=this).attachEvent("on"+t,function(t){(t=t||r.event).preventDefault=t.preventDefault||function(){t.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0},e.call(i,t)})}function n(t,e){if(e=t.length)for(;e--;)t[e].addEventListener=s;else t.addEventListener=s;return t}r.addEventListener||(n([i,r]),"Element"in r?r.Element.prototype.addEventListener=s:(i.attachEvent("onreadystatechange",function(){n(i.all)}),t("getElementsByTagName"),t("getElementById"),t("createElement"),n(i.all)))}(window,document);